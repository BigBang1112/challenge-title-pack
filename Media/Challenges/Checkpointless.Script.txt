***Metadata***
***
Script.Name = "Checkpointless";
Script.AuthorLogin = "bigbang1112";
Script.Description = "{{{{CHECKPOINTLESS_DESCRIPTION}}}}";
***

***Main***
***
declare SChProblem Problem_CannotRemoveCheckpoint;

declare Checkpoints = GetCheckpointBlocks();
declare CheckpointItems = GetCheckpointItems();

for(i,0,Checkpoints.count-1) {
	declare Anchor = Checkpoints[i];
	if(Anchor.DefaultTag == "Checkpoint") {
		declare Removed = RemoveAnchorBlock(Anchor);
		SetStatusProgress((i+1.0)/(Checkpoints.count + CheckpointItems.count));
		SetStatusMessage("{{{{CHECKPOINT_FOUND}}}} " ^ Anchor.Block.Name);

		if(!Removed) Problem(Problem_CannotRemoveCheckpoint);
	}
	yield;
}

for(i,0,CheckpointItems.count-1) {
	declare Anchor = CheckpointItems[i];
	if(Anchor.DefaultTag == "Checkpoint") {
		declare Removed = RemoveAnchorItem(Anchor);
		SetStatusProgress((i+1.0+Checkpoints.count)/(Checkpoints.count + CheckpointItems.count));
		SetStatusMessage("{{{{CHECKPOINT_FOUND}}}}");

		if(!Removed) Problem(Problem_CannotRemoveCheckpoint);
	}
	yield;
}

Solution();
***

***Main_Fast***
***
foreach(Block,GetCheckpointBlocks())
	RemoveBlock(Block.Coord);
Solution();
***